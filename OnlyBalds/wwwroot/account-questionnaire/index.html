<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1" />

	<title>Questionnaire | Only Balds</title>
	<meta name="description" content="">

    <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Libre+Franklin:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

	<link href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">

	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
	<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
	<![endif]-->   
	
	<link rel="icon" href="/images/favicon-16.png" sizes="16x16" type="image/png">
	<link rel="icon" href="/images/favicon-32.png" sizes="32x32" type="image/png">
	<link rel="icon" href="/images/favicon-48.png" sizes="48x48" type="image/png">
	<link rel="icon" href="/images/favicon-62.png" sizes="62x62" type="image/png">
	<link rel="apple-touch-icon" href="apple-touch-icon.png">
	<meta property="og:url" content="https://example.com/page.html">
	<meta property="og:type" content="website">
	<meta property="og:title" content="Content Title">
	<meta property="og:image" content="https://example.com/image.jpg">
	<meta property="og:description" content="Description Here">
	<meta property="og:site_name" content="Site Name">
	<meta property="og:locale" content="en_US">

	<link rel="stylesheet" href="/assets/styles/styles-1d9c2d7206.css"/>

	<script src="/assets/scripts/Vendor-07ad14d4d0.js"></script>

    <script src="https://maps.googleapis.com/maps/api/js?key=YOUR_API_KEY&libraries=places"></script>

</head>
<body>

	<!-- COMMENT
	================================================== -->
	<div class="navbar">
		<div class="navbar__left">
			<a href="/" class="navbar__logo">
                <img src="/assets/images/logo.png" alt="Only Balds" >
            </a>
		</div>
		<nav class="navbar__nav">
			<ul class="nav main-nav">
				<li class="nav__item"><a href="/about" class="nav__link">About</a></li>
				<li class="nav__item"><a href="/forum" class="nav__link">Forum</a></li>
				<li class="nav__item"><a href="/chat-room" class="nav__link">Chat Room</a></li>
				<li class="nav__item"><a href="/marketplace" class="nav__link">Marketplace</a></li>
				<li class="nav__item dropdown">
					<a href="#" class="nav__link dropdown__toggle" role="button">Social
						<i class="fa fa-angle-down dropdown__toggle-icon"></i>
					</a>
					<ul class="dropdown__nav">
						<li class="dropdown__item"><a href="#" class="dropdown__link dropdown__link--icon" target="_blank"><i class="fa fa-facebook-square"></i> Facebook</a></li>
						<li class="dropdown__item"><a href="https://www.instagram.com/onlybaldsllc/" class="dropdown__link dropdown__link--icon" target="_blank"><i class="fa fa-instagram"></i> Instagram</a></li>
					</ul>
				</li>
			</ul>
		</nav>
		<div class="navbar__right dropdown">
			<a href="#" class="navbar__user-dropdown">
                <div class="navbar__user-profile-abbrev">
                    <div class="navbar__user-profile-abbrev-text">
                        <svg xmlns="http://www.w3.org/2000/svg" style="margin-top: 5px;" width="16" height="16" fill="currentColor" class="bi bi-person-circle" viewBox="0 0 16 16">
                            <path d="M11 6a3 3 0 1 1-6 0 3 3 0 0 1 6 0"/>
                            <path fill-rule="evenodd" d="M0 8a8 8 0 1 1 16 0A8 8 0 0 1 0 8m8-7a7 7 0 0 0-5.468 11.37C3.242 11.226 4.805 10 8 10s4.757 1.225 5.468 2.37A7 7 0 0 0 8 1"/>
                        </svg>
                    </div>
                </div> 
                <span class="navbar__mobile-hide">My </span>Account <i class="fa fa-angle-down dropdown__toggle-icon"></i>
            </a>
            <ul id="menu-options" class="dropdown__nav dropdown__nav--user">
                <li class="dropdown__item dropdown__item--title greeting"></li>
                <li class="dropdown__item">
                    <a href="/account-questionnaire" class="dropdown__link dropdown__link--icon">
                        <i class="fa fa-edit"></i> 
                        Questionnaire
                    </a>
                </li>
                <li class="dropdown__item sign-in">
                    <a href="/auth/login" class="dropdown__link dropdown__link--icon">
                        <i class="fa fa-sign-in"></i> 
                        Sign In
                    </a>
                </li>
            </ul>
            <div class="navbar__mobile-buttons">
                <button class="navbar__toggle navicon">
                    <div class="navicon__holder">
                        <div class="navicon__line"></div>
                        <div class="navicon__line"></div>
                        <div class="navicon__line"></div>
                    </div>
                </button>
            </div> 
		</div>
	</div><!--/comment -->
	
    <!-- BANNER
    ============================================== -->
    <div class="banner banner--fade-to-gray">
        <div class="container">
            <h1 class="banner__heading" data-aos="fade-up" data-aos-delay="100" data-aos-offset="0">Welcome to OnlyBalds</h1>
            <p class="lead banner__paragraph" data-aos="fade-up" data-aos-delay="200" data-aos-offset="0">
                Thanks for signing up! You're just a few clicks away from joining a supportive community navigating their balding journeys together.
                Fill out the quick questionnaire below to personalize your experience and set up your profile.
            </p>
        </div>
    </div><!--/banner -->


    <!-- BALDIE QUESTIONNAIRE
    ============================================== -->
    <div class="section section--gray">
        <div class="container">
            <div class="box box--with-top-lines"  data-aos="fade-up" data-aos-delay="150" data-aos-offset="0">
                <div class="box__top-line box__top-line--light-blue"></div>
                <div class="box__top-line box__top-line--blue"></div>
                <div class="box__holder">
                    <div class="box__section box__section--chat-frame">
                        <form action="" id="baldie-questionnaire">
                            <div class="grid">
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="firstName" class="control__label">What is your first name?</label>
                                    <input type="text" id="firstName" name="firstName" class="control__input">
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="lastName" class="control__label">What is your last name?</label>
                                    <input type="text" id="lastName" name="lastName" class="control__input">
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="displayName" class="control__label">What would you like us to call you?</label>
                                    <input type="text" id="displayName" name="displayName" class="control__input">
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="address" class="control__label">What is your current address?</label>
                                    <input type="text" id="address" name="address" class="control__input" autocomplete="off">
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="hearAbout" class="control__label">How Did You Hear About Us?</label>
                                    <select class="select control__input" id="hearAbout" name="hearAbout">
                                        <option value="Select An Option">Select An Option</option>
                                        <option value="Social Media">Social Media</option>
                                        <option value="Friend">Friend</option>
                                        <option value="Facebook">Facebook</option>
                                        <option value="Other">Other</option>
                                    </select>
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="whereYouBuy" class="control__label">Where do you buy your products currently?</label>
                                    <input type="text" id="whereYouBuy" name="whereYouBuy" class="control__input">

                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="apparelSize" class="control__label">Apparel Size</label>
                                    <select class="select control__input" id="apparelSize" name="apparelSize">
                                        <option value="Select An Option">Select An Option</option>
                                        <option value="S">S</option>
                                        <option value="M">M</option>
                                        <option value="L">L</option>
                                        <option value="XL">XL</option>
                                    </select>
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="monthlySpend" class="control__label">How much do you spend monthly on bald/beard products?</label>
                                    <input type="text" id="monthlySpend" name="monthlySpend" class="control__input">
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="newRoutine" class="control__label" name="newRoutine">Are you open to trying new products/routines?</label>
                                    <label for="new-routine-1">
                                        <input type="radio" name="newRoutine" id="new-routine-1" value="Yes"> Yes
                                    </label>
                                    <label for="new-routine-2">
                                        <input type="radio" name="newRoutine" id="new-routine-2" value="Yes"> No
                                    </label>
                                </div>
                                <div class="grid__column grid__column--12 grid__column--6--md control">
                                    <label for="activeBaldie" class="control__label" name="activeBaldie">Are you an active baldie? (workout, run, etc.)</label>
                                    <label for="active-baldie-1">
                                        <input type="radio" name="activeBaldie" id="active-baldie-1" value="Yes"> Yes
                                    </label>
                                    <label for="active-baldie-2">
                                        <input type="radio" name="activeBaldie" id="active-baldie-2" value="Yes"> No
                                    </label>
                                </div>
                                <div class="grid__column grid__column--12">
                                    <h2 class="control__heading">What Type of Bald Are You?</h2>
                                </div>
                                <div class="grid__column grid__column--12 grid__column--12--md control">
                                    <label for="baldType" class="control__label">Choose Your Bald Type</label>
                                    <select class="select control__input" id="baldType" name="baldType">
                                        <option value="select">Select An Option</option>
                                        <option value="veteran">Veteran/Confident Baldie</option>
                                        <option value="denier">The Denier Baldie</option>
                                        <option value="rookie">Rookie Up and Comer</option>
                                        <option value="beard">Beard Baldie</option>
                                        <option value="notBald">Not a Baldie</option>
                                    </select>

                                    <div class="select-collapse veteran">
                                        <div class="control">
                                            <label for="shaveOrBuzz" class="control__label">Do you shave or buzz?</label>
                                            <input type="text" class="control__input" id="shaveOrBuzz" name="shaveOrBuzz" placeholder="Shave or buzz">
                                        </div>          
                                        <div class="control">
                                            <label for="howLong" class="control__label">How long have you been bald?</label>
                                            <input type="text" class="control__input" id="howLong" name="howLong" placeholder="Enter years">
                                        </div>   
                                        <div class="control">
                                            <label for="chromeCap" class="control__label">Do you have the chrome cap?</label>
                                            <input type="text" class="control__input" id="chromeCap" name="chromeCap" placeholder="Yes or No">
                                        </div>                                
                                    </div>
                                    <div class="select-collapse denier">  
                                        <div class="control">
                                            <label for="selfConscious" class="control__label">Are you self-conscious about being bald?</label>
                                            <input type="text" class="control__input" id="selfConscious" name="selfConscious" placeholder="Yes or No">
                                        </div>
                                        <div class="control">
                                            <label for="selfConsciousReason" class="control__label">Reason?</label>
                                            <input type="text" class="control__input" id="selfConsciousReason" name="selfConsciousReason" placeholder="Enter reason">
                                        </div>                              
                                    </div>
                                    <div class="select-collapse rookie">  
                                        <div class="control">
                                            <label for="haveABeard" class="control__label">Do you have a beard?</label>
                                            <input type="text" class="control__input" id="haveABeard" name="haveABeard" placeholder="Yes or No">
                                        </div>
                                        <div class="control">
                                            <label for="lookingForRecommendations" class="control__label">Are you looking for recommendations?</label>
                                            <input type="text" class="control__input" id="lookingForRecommendations" name="lookingForRecommendations" placeholder="Yes or No">
                                        </div>                              
                                    </div>
                                    <div class="select-collapse beard">  
                                        <div class="control">
                                            <label for="typeOfBeard" class="control__label">What type of beard do you have?</label>
                                            <select class="select control__input" id="typeOfBeard" name="typeOfBeard">
                                                <option value="Select An Option">Select An Option</option>
                                                <option value="1">Full Beard</option>
                                                <option value="2">Mustache</option>
                                                <option value="3">Goatee</option>
                                            </select>
                                        </div>                            
                                    </div>
                                    <div class="select-collapse notBald">  
                                        <div class="control">
                                            <label for="typeOfNotBald" class="control__label">Not a Baldie?</label>
                                            <select class="select control__input" id="typeOfNotBald" name="typeOfNotBald">
                                                <option value="Select An Option">Select An Option</option>
                                                <option value="1">I'm here for someone else</option>
                                                <option value="2">Not bald yet</option>
                                                <option value="3">Not bald, but still want to help</option>
                                            </select>
                                        </div>                            
                                    </div>
                                </div>
                                <div class="grid__column grid__column--12 control">
                                    <button id="submit-questionnaire" class="btn btn--blue" type="submit">Submit Questionnaire!</button>
                                </div>
                            </div>
                        </form>

                    </div>
                </div>
            </div>
        </div>
    </div>

        </div>
    </div><!--/baldie questionnaire-->

	    <div class="footer">
        <div class="container">
            <div class="footer__buttons">
                <ul class="footer__button-links">
                    <li><a href="/forum" class="btn btn--rounded btn--faded">Forum</a></li>
                    <li><a href="/chat-room" class="btn btn--rounded btn--faded">Chat Room</a></li>
                    <li><a href="/marketplace" class="btn btn--rounded btn--faded">Marketplace</a></li>
                    <li class="footer__right-list-item"><a href="/account-questionnaire" class="btn btn--rounded btn--white">Become A Member</a></li>
                </ul>
            </div>
        </div>
        <img src="/assets/images/only-balds-face-icon.png" alt="" aria-hidden="true" class="footer__face-icon">
    </div>

    <script src="/assets/scripts/App-5379555225.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>

    <script>
        $(() => {
            $.ajax({
                url: "/identity-information",
                method: "GET",
                success: function (data) {
                    user = data;
                    let userName = user.name;

                    $(".sign-in").remove();
                    $(".greeting").empty().append(`Hi, ${userName}`);
                    $("#menu-options").append(`
                        <li class="dropdown__item sign-out">
                            <a href="/auth/logout" class="dropdown__link dropdown__link--icon">
                                <i class="fa fa-sign-out"></i> 
                                Sign Out
                            </a>
                        </li>
                    `);

                    handleSubmitQuestionnaire(user.account);

                    if (user.account == null || user.account == undefined) {
                        return;
                    }

                    if (user.account.hasSubmittedQuistionnaire == true)
                    {
                        window.location.replace('/');
                    }
                },
                error: function (xhr, status, error) {
                    window.location.replace('/unauthorized');
                }
            });
        });

        const handleSubmitQuestionnaire = (account) => {
            $('#submit-questionnaire').click(async function (event) {
                event.preventDefault();

                console.log("Submitting questionnaire for account:", account);

                const baldType = $('#baldType').val();

                const answers = {
                    id: crypto.randomUUID(),
                    firstName: $('#firstName').val(),
                    lastName: $('#lastName').val(),
                    displayName: $('#displayName').val(),
                    address: $('#address').val(),
                    isCompleted: true,
                    data: {
                        questions: [
                            {
                            title: "How did you hear about us?",
                                answer: $('#hearAbout').val()
                            },
                            {
                                title: "Where do you usually buy products?",
                                answer: $('#whereYouBuy').val()
                            },
                            {
                                title: "Apparel size",
                                answer: $('#apparelSize').val()
                            },
                            {
                                title: "Monthly spend on grooming products",
                                answer: $('#monthlySpend').val()
                            },
                            {
                                title: "Are you open to trying new products/routines?",
                                answer: $('input[name="newRoutine"]:checked').val()
                            },
                            {
                                title: "Are you an active baldie?",
                                answer: $('input[name="activeBaldie"]:checked').val()
                            },
                            {
                                title: "Type of bald",
                                answer: baldType
                            }
                        ],
                        baldingOptions: [
                        {
                            option: [
                            {
                                baldingOptionTitle: "Beard Baldie",
                                questions: [
                                {
                                    title: "What type of beard do you have?",
                                    answer: $('#typeOfBeard').val()
                                }
                                ]
                            },
                            {
                                baldingOptionTitle: "Rookie Baldie",
                                questions: [
                                {
                                    title: "Do you have a beard?",
                                    answer: $('#haveABeard').val()
                                },
                                {
                                    title: "Are you looking for recommendations?",
                                    answer: $('#lookingForRecommendations').val()
                                }
                                ]
                            },
                            {
                                baldingOptionTitle: "Denier Baldie",
                                questions: [
                                {
                                    title: "Are you self-conscious about being bald?",
                                    answer: $('#selfConscious').val()
                                },
                                {
                                    title: "Reason?",
                                    answer: $('#selfConsciousReason').val()
                                }
                                ]
                            },
                            {
                                baldingOptionTitle: "Confident Baldie",
                                questions: [
                                {
                                    title: "Do you shave or buzz?",
                                    answer: $('#shaveOrBuzz').val()
                                },
                                {
                                    title: "How long have you been bald?",
                                    answer: $('#howLong').val()
                                },
                                {
                                    title: "Do you have the chrome cap?",
                                    answer: $('#chromeCap').val()
                                }
                                ]
                            },
                            {
                                baldingOptionTitle: "Not a Baldie",
                                questions: [
                                {
                                    title: "Not a Baldie?",
                                    answer: $('#typeOfNotBald').val()
                                }
                                ]
                            }
                            ]
                        }]
                    }
                };

                try {
                    console.log('Submitting form:', answers);

                    $.ajax({
                        url: "/identity-information",
                        method: "GET",
                        success: function (data) {
                            user = data;

                            $.ajax({
                                url: "/onlybalds-api/questionnaire",
                                method: "POST",
                                contentType: "application/json",
                                data: JSON.stringify(answers),
                                success: function (response) {
                                    let account = 
                                    {
                                        questionnaireId: answers.id,
                                        hasSubmittedQuistionnaire: true,
                                        identityProviderId: user.claims.sub,
                                        firstName: $('#firstName').val(),
                                        lastName: $('#lastName').val(),
                                        displayName: $('#displayName').val(),
                                        address: $('#address').val(),
                                        email: user.claims.email,
                                        username: user.claims.nickname,
                                    };

                                    $.ajax({
                                        url: "/onlybalds-api/account",
                                        method: "POST",
                                        contentType: "application/json",
                                        data: JSON.stringify(account),
                                        success: function (response) {
                                            console.log("Account Success:", response);
                                            window.location.replace('/');
                                        },
                                        error: function (xhr, status, error) {
                                            console.error("Error:", status, error);
                                        }
                                    });
                                },
                                error: function (xhr, status, error) {
                                    console.error("Error:", status, error);
                                }
                            });
                        },
                        error: function (xhr, status, error) {
                        }
                    });
                } catch (error) {
                    console.error('Error submitting form:', error);
                }
            });
        }
    </script>

    <script>
    function initAutocomplete() {
        const input = document.getElementById('address');
        const options = {
            types: ['address'],
            componentRestrictions: { country: 'us' }
        };

        new google.maps.places.Autocomplete(input, options);
    }

    //window.addEventListener('load', initAutocomplete);
</script>

</body>
</html>